---
title: "\\vspace{1in}DSML Project Paper"
subtitle: "Semesterarbeit \n DSML - SS 2022"
#date: "`r format(Sys.time(), ' %d. %B %Y')`\\vspace{1in}"
output: 
  pdf_document: 
    toc: no
    number_sections: true
header-includes: |
  \usepackage[german]{babel}
  \usepackage{fancyhdr}
  \pagestyle{fancy}
  \fancyfoot{}
  \lfoot{10 Juni 2022}
  \rfoot{Seite \thepage}
  \usepackage{float}
  \floatplacement{figure}{H}
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
source("rmd_setup_file.R", local = knitr::knit_global())
```

```{=tex}
\vspace*{\fill}
\begin{center}
\begin{tabular}{ l l }
 Studenten & Iris Lüthi, Maja Velkova, Yannik Zimmermann \\ 
 Dozenten & Prof. Dr. M. Krebs, Prof. Dr. P. Collovà\\  
 Modul & DSML \\
 Semester & 6. Semester\\
 Datum & \date{\today}
\end{tabular}
\end{center}
```
\newpage

\tableofcontents

\newpage

<!-- https://bookdown.org/yihui/rmarkdown-cookbook/figure-placement.html -->

# Einleitung

Im Rahmen des Moduls Data Science and Machine Learning DSML werden die Studierenden der Berner Fachhochschule dazu angehalten eine empirische Arbeit auf dem Gebiet der Datenanalyse oder des maschinellen Lernens unter Verwendung von R oder Python zu erarbeiten.

Das Autorenteam hat sich für vier verschiedene Datensets mit ähnlichem Kontext entschieden. In der folgenden Arbeit will das Autorenteam mithilfe der Datensets herausfinden, ob es einen Zusammenhang zwischen der weltweiten Temperaturentwicklung und der Luftzusammensetzung von verschiedenen Gasen gibt. Hierfür werden erst die weltweiten Veränderungen der Temperaturen analysiert, worauf eine genauere Analyse Temperatur, Luftqualität und Gas-Zusammensetzung der USA durchgeführt wird. Auf die Analyse der Datensets folgt die Anwendung von ML-Algorithmen auf die Daten, um eine Vorhersage für die Luftqualität und die Temperaturentwicklung zu treffen. Schlussendlich werden die Ergebnisse von dem Autorenteam zusammengefasst, woraufhin ein persönliches Fazit folgt.

# Data Source und Datasets

Alle Datensets, die im Rahmen dieser Semesterarbeit genutzt werden, wurden auf der Plattform [Kaggle](https://kaggle.com) veröffentlicht. Die Plattform bietet über 50'000 öffentliche Datensets. Diese können dabei direkt in Online-Notebooks analysiert werden. Kaggle bietet nebenbei einige Kurse zur Datenanalyse mithilfe verschiedenster Tools und Programmiersprachen.

## Dataset "Daily Temperature of Major Cities"

Das "Daily Temperature of Major Cities" Dataset besteht aus acht Spalten und 2,9 Millionen Zeilen. In der originalen Datenstruktur sind folgende Spalten enthalten:

-   Region
-   Country
-   State
-   City
-   Day
-   Month
-   Year
-   AvgTemperature

Mithilfe des folgenden Befehls lässt sich herausfinden, wie viele Zeilen identisch sind. In diesem Dataset sind insgesamt 20'715 identisch und müssen daher vor dem nächsten Schritt gefiltert werden.

``` r
sum(duplicated(raw_city_temps)) 
```

Bei der Untersuchung des Datasets stellte sich heraus, dass sich einige der Temperaturwerte unterhalb von -90° Fahrenheit befinden. Aufgrund der unrealistischen Werte werden diese Zeilen für die weitere Analyse entfernt. Des Weiteren befinden sich mögliche Tippfehler in der Datenerhebung, da Temperaturwerte für die Jahre 200 und 201 erfasst wurden. Diese Werte werden ebenfalls gefiltert. Zuletzt wurden die Werte aus dem Jahr 2020 entfernt, da die Datenerfassung für dieses Jahr nicht abgeschlossen wurde. Die Bereinigung wurde durch folgenden Befehl vorgenommen:

``` r
# Data preprocessing for further analysis
city_temps = raw_city_temps %>% 
  # remove duplicates
  distinct() %>% 
  # remove temp values below -50f because they seem like default/null values
  filter(AvgTemperature > -50) %>% 
  # remove values where year is below 1950 because those are probably typos (200, etc)
  filter(Year > 1950) %>% 
  # remove year 2020 because of really low number of observations
  filter(Year != 2020)
```

Die Durchschnittstemperatur wird in Fahrenheit angegeben. Für ein besseres Verständnis wurde die Spalte "AvgTemperatureInCelcius" durch folgenden Befehl hinzugefügt:

``` r
city_temps['AvgTemperatureInCelcius'] = fahrenheit.to.celsius(city_temps$AvgTemperature)
```

## Dataset "Global Air Quality Index (AQI)"

## Dataset "US Pollution"

# Analyse

## Temperaturverlauf von 1995 - 2020

## Luftqualität und Verteilung der Treibhausgase der USA

## Vorhersagen zur Temperatur & Luftqualität

## Zusammenhänge zwischen Temperatur & Treibhausgasen

```{r diff, echo=TRUE, fig.align='center', fig.cap="Gemessene Durchschnittstemperatur in Grossstädten rund um die Erde", out.width="60%"}
city_temps %>%
  group_by(Year) %>%
  summarize_at(vars(AvgTemperatureInCelsius), list(AvgTemp=mean)) %>%
  ggplot(aes(Year,AvgTemp)) + 
  geom_smooth(method = 'loess', formula = 'y ~ x') + 
  geom_line() +
  labs(
    x="Jahr", 
    y="Durchschnittstemperatur in Celsius", 
    title = "Gemessene Durchschnittstemperatur in Grossstädten rund um die Erde"
  ) 
```
xtxt


# Resultate und Diskussion

# Fazit

# Literaturverzeichnis {.unnumbered}

\newpage

# Selbstständigkeitserklärung {.unnumbered}

Die Länge des vorliegenden Textes ab und inklusive Kapitelüberschrift 1 bis vor diesen Abschnitt beträgt XXXX Wörter.

Wir bestätigen, die vorliegende Arbeit selbständig verfasst zu haben. Sämtliche Textstellen, die nicht von uns stammen, sind als Zitate gekennzeichnet und mit dem genauen Hinweis auf ihre Herkunft versehen.
Die verwendeten Quellen (gilt auch für Abbildungen, Grafiken u.ä.) sind im 
Literatur- bzw. Quellenverzeichnis aufgeführt.
\newline
\newline
\newline
\newline
Bern, 10.06.2022
\newline
\newline
\newline
\newline
\newline
\newline
Iris Lüthi
\newline
\newline
\newline
\newline
Maja Velkova
\newline
\newline
\newline
\newline
Yannik Zimmermann

<!-- Note that the `echo = FALSE` parameter was added to the code chunk to prevent printing of the R code that generated the plot. -->

<!-- Fragen in Zusammenhang mit Unwetter: -->

<!-- - Hat sich die Anzahl Unwetter (definieren was mit Unwetter gemeint ist) über die fünf Jahre erhöht? -->

<!-- - Wenn ja, welche Art von Unwetter hat zugenommen? Welche Art von Unwetter hat abgenommen/ist weniger vorgekommen? -->

<!-- - Besteht eine Korrelation zwischen der erhöhten Anzahl Unwetter (definieren welches Unwetter) und der erhöhten/tieferen Durchschnittstemperaturen? -->

<!-- - Hat die Frequenz der Unwetter zu- oder abgenommen? - Frage kann noch nach Unwetterart und Ort aufgeteilt werden. -->

<!-- - Hat die Stärke der Unwetter zu- oder abgenommen? - Frage kann noch nach Unwetterart und Ort aufgeteilt werden. -->

<!-- - Hat die Wassermenge an Regentagen allgemein zu- oder abgenommen? -->

<!-- - Haben sich die Wetterereignissen örtlich verschoben? (Zuerst Standard aufzeigen, danach mögliche Änderung) -->

<!-- - Hat sich die Anzahl Regentagen verändert? -->

<!-- - Hat sich die Anzahl Sonnentage verändert? -->

<!-- - usw -->

<!-- Fragen in Zusammenhang mit Temperaturänderungen: -->

<!-- - Wurde eine generelle stetige Temperaturänderung über die fünf Jahre gemessen? -->

<!-- - Wenn ja, wurde es allgemein kälter oder wärmer? -->

<!-- - Wurde eine allgemeine Temperaturerhöhung über die Jahre 2016-2021 gemessen? -->

<!-- - Wenn ja, wie hoch und wie rasch hat sich die Temperatur geändert? (Diagramm) -->

<!-- - In welchem Staat, wurde die stärkste Temperaturänderung gemessen? -->

<!-- - Wie stark weicht die Temperaturänderung von der natürlichen Erderwärmung ab? -->

<!-- Fragen in Zusammenhang mit den Gasen: -->

<!-- - Welches Gas hat allgemein am stärksten zugenommen? -->

<!-- - Gleiche Frage in Bezug zu den einzelnen Staaten und  Jahren -->

<!-- - Kann aufgrund der Erhöhung eines bestimmen Gases eine Erhöhung/Verstärkung einer bestimmen Unwetterart erkennt werden? -->
